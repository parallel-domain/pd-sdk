

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>paralleldomain.utilities.projection &mdash; Parallel Domain SDK  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="paralleldomain.utilities.mask" href="mask.html" />
    <link rel="prev" title="paralleldomain.utilities.transformation" href="transformation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Parallel Domain SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Parallel Domain SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#quick-start">Quick Start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started.html#developers">Developers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting_started.html#tests">Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started.html#documentation">Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#id1">Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started.html#tutorials">Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started.html#api-reference">API Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/general/index.html">General Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/general/general_usage.html">Load Dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/general/general_usage.html#Dataset-Information">Dataset Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/general/general_usage.html#Access-available-Scenes">Access available Scenes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/general/general_usage.html#Load-Scene">Load Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/general/general_usage.html#Load-Frame-+-Sensor">Load Frame + Sensor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/general/general_usage.html#Frames">Frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/general/general_usage.html#Sensors">Sensors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/general/general_usage.html#Load-Sensor-Frames">Load Sensor Frames</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/general/general_usage.html#Accessing-shared-properties">Accessing shared properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/general/general_usage.html#Accessing-Annotations">Accessing Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/general/general_usage.html#Access-Camera-Data">Access Camera Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/general/general_usage.html#Access-LiDAR-Data">Access LiDAR Data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/any_path/index.html">AnyPath</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/any_path/any_path.html">The AnyPath Object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/any_path/any_path.html#Instantiate-AnyPath-for-different-addresses">Instantiate AnyPath for different addresses</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tutorial/any_path/any_path.html#Absolute-+-S3-Paths">Absolute + S3 Paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tutorial/any_path/any_path.html#Relative-Paths">Relative Paths</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tutorial/any_path/any_path.html#File-Access">File Access</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/ml_data_generator/index.html">ML Data Generator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/ml_data_generator/ml_data_generator.html">Data loader for a Segmentation model</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dataset.html">paralleldomain.model.dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="scene.html">paralleldomain.model.scene</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensor.html">paralleldomain.model.sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="annotation.html">paralleldomain.model.annotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="geometry.html">paralleldomain.model.geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="any_path.html">paralleldomain.utilities.any_path</a></li>
<li class="toctree-l1"><a class="reference internal" href="transformation.html">paralleldomain.utilities.transformation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">paralleldomain.utilities.projection</a></li>
<li class="toctree-l1"><a class="reference internal" href="mask.html">paralleldomain.utilities.mask</a></li>
<li class="toctree-l1"><a class="reference internal" href="os.html">paralleldomain.utilities.os</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Parallel Domain SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>paralleldomain.utilities.projection</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/projection.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-paralleldomain.utilities.projection">
<span id="paralleldomain-utilities-projection"></span><h1>paralleldomain.utilities.projection<a class="headerlink" href="#module-paralleldomain.utilities.projection" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="paralleldomain.utilities.projection.DistortionLookupTable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DistortionLookupTable</span></span><a class="headerlink" href="#paralleldomain.utilities.projection.DistortionLookupTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Container object for distortion lookup tables used in distortion model <cite>pd_fisheye</cite>.
Can be accessed like any <cite>np.ndarray</cite></p>
<dl class="py method">
<dt class="sig sig-object py" id="paralleldomain.utilities.projection.DistortionLookupTable.from_ndarray">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_ndarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#paralleldomain.utilities.projection.DistortionLookupTable.from_ndarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a <cite>np.ndarray</cite> and creates a <a class="reference internal" href="#paralleldomain.utilities.projection.DistortionLookupTable" title="paralleldomain.utilities.projection.DistortionLookupTable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DistortionLookupTable</span></code></a> instance from it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>numpy.ndarray</em>) – <cite>np.ndarray</cite> of shape (N x 2). Array will be sorted by first column. Last two rows will be used to
extrapolate for maximum valid angle value of Pi.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Distortion lookup table to be used with projection functions using distortion model <cite>pd_fisheye</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#paralleldomain.utilities.projection.DistortionLookupTable" title="paralleldomain.utilities.projection.DistortionLookupTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">DistortionLookupTable</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="paralleldomain.utilities.projection.project_points_3d_to_2d">
<span class="sig-name descname"><span class="pre">project_points_3d_to_2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camera_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_3d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distortion_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distortion_lookup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#paralleldomain.utilities.projection.project_points_3d_to_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Projects an array of 3D points in Cartesian coordinates onto an image plane.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k_matrix</strong> (<em>numpy.ndarray</em>) – Camera intrinsic matrix. Definition can be found in
<a class="reference external" href="https://docs.opencv.org/4.5.3/dc/dbb/tutorial_py_calibration.html">OpenCV documentation</a>.</p></li>
<li><p><strong>camera_model</strong> (<em>str</em>) – One of <cite>opencv_pinhole</cite>, <cite>opencv_fisheye</cite>, <cite>pd_fisheye</cite>, <cite>pd_orthographic</cite>.
More details in <a class="reference internal" href="sensor.html#paralleldomain.model.sensor.CameraModel" title="paralleldomain.model.sensor.CameraModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraModel</span></code></a>.</p></li>
<li><p><strong>points_3d</strong> (<em>numpy.ndarray</em>) – A matrix with dimensions (nx3) containing the points.
Points must be already in the camera’s coordinate system.</p></li>
<li><p><strong>distortion_parameters</strong> (<em>Optional</em><em>[</em><em>numpy.ndarray</em><em>]</em>) – Array of applicable distortion parameters for
distortion models <cite>opencv_pinhole</cite> and <cite>opencv_fisheye</cite>.</p></li>
<li><p><strong>distortion_lookup</strong> (<em>Optional</em><em>[</em><em>paralleldomain.utilities.projection.DistortionLookup</em><em>]</em>) – Table of undistorted and distorted angles. Required for <cite>pd_fisheye</cite> model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A matrix with dimensions (nx2) containing the point projections. <code class="xref py py-obj docutils literal notranslate"><span class="pre">dtype</span></code> is <code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code> and values need
to be rounded to integers by the user to receive actual pixel coordinates. Includes all points, independent
if they are on the image plane or outside. Points behind the image plane will be projected, too. If values are
not valid (e.g., for undistorted pinhole cameras), filtering needs to be applied by the calling function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="paralleldomain.utilities.projection.project_points_2d_to_3d">
<span class="sig-name descname"><span class="pre">project_points_2d_to_3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camera_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distortion_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distortion_lookup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#paralleldomain.utilities.projection.project_points_2d_to_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps image plane coordinates to 3D points in Cartesian coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k_matrix</strong> (<em>numpy.ndarray</em>) – <p>Camera intrinsic matrix. Definition can be found in
<a class="reference external" href="https://docs.opencv.org/4.5.3/dc/dbb/tutorial_py_calibration.html">OpenCV documentation</a>.</p>
</p></li>
<li><p><strong>camera_model</strong> (<em>str</em>) – One of <cite>opencv_pinhole</cite>, <cite>opencv_fisheye</cite>, <cite>pd_fisheye</cite>.
More details in <a class="reference internal" href="sensor.html#paralleldomain.model.sensor.CameraModel" title="paralleldomain.model.sensor.CameraModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraModel</span></code></a>.</p></li>
<li><p><strong>points_2d</strong> (<em>numpy.ndarray</em>) – A matrix with dimensions (nx2) containing the points.
Points must be in image coordinate system (x,y).</p></li>
<li><p><strong>depth</strong> (<em>numpy.ndarray</em>) – Depth mask with the same dimensions as the image canvas.</p></li>
<li><p><strong>distortion_parameters</strong> (<em>Optional</em><em>[</em><em>numpy.ndarray</em><em>]</em>) – Array of applicable distortion parameters for
distortion models <cite>opencv_pinhole</cite> and <cite>opencv_fisheye</cite>.</p></li>
<li><p><strong>distortion_lookup</strong> (<em>Optional</em><em>[</em><em>paralleldomain.utilities.projection.DistortionLookup</em><em>]</em>) – Table of undistorted and distorted angles. Required for <cite>pd_fisheye</cite> model.</p></li>
<li><p><strong>interpolate</strong> (<em>bool</em>) – When points are not exactly on an image pixel, apply bi-linear interpolation to estimate
the corresponding depth value. Default: True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A matrix with dimensions (nx3) containing the point projections in 3D using the provided depth mask.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="paralleldomain.utilities.projection.points_2d_inside_image">
<span class="sig-name descname"><span class="pre">points_2d_inside_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camera_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_3d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#paralleldomain.utilities.projection.points_2d_inside_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the indices for an array of 2D image points that are inside the image canvas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<em>int</em>) – Pixel width of the image canvas.</p></li>
<li><p><strong>height</strong> (<em>int</em>) – Pixel height of the image canvas.</p></li>
<li><p><strong>camera_model</strong> (<em>str</em>) – One of <cite>opencv_pinhole</cite>, <cite>opencv_fisheye</cite>, <cite>pd_fisheye</cite>.
More details in <a class="reference internal" href="sensor.html#paralleldomain.model.sensor.CameraModel" title="paralleldomain.model.sensor.CameraModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraModel</span></code></a>.</p></li>
<li><p><strong>points_2d</strong> (<em>numpy.ndarray</em>) – A matrix with dimensions (nx2) containing the points that should be tested
if inside the image canvas. Points must be in image coordinate system (x,y).</p></li>
<li><p><strong>points_3d</strong> (<em>Optional</em><em>[</em><em>numpy.ndarray</em><em>]</em>) – Optional array of size (nx3) which provides the 3D camera coordinates for each point. Required for
camera models <cite>opencv_pinhole</cite> and <cite>opencv_fisheye</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An array with dimensions (n,).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mask.html" class="btn btn-neutral float-right" title="paralleldomain.utilities.mask" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="transformation.html" class="btn btn-neutral float-left" title="paralleldomain.utilities.transformation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Parallel Domain.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>